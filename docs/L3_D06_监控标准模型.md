---
id: L3_D06_STD_V1.0
title: 监控标准模型（L3）
level: L3
domain: D06
version: V1.0
status: enhanced
author: Formal Framework Team
date: 2024-12-19
tags: [monitoring, observability, metrics, alerting, tracing]
---

## 1. 范围

- 指标、告警、日志、追踪、仪表盘

## 2. 核心结构

```yaml
ObservabilityStandard:
  Metric:
    formal_spec: |
      Metric = {
        name: String
        kind: {counter, gauge, histogram, summary}
        labels: Set<Label>
        unit: Unit
        retention: Duration
      }

  Alert:
    formal_spec: |
      Alert = {
        expr: PromQL
        severity: {info, warning, critical}
        for: Duration
        annotations: {summary, description}
        runbook: URL
      }

  Trace:
    formal_spec: |
      Trace = {
        service: ServiceName
        span: Span
        attributes: KeyValueMap
        latency_buckets: Histogram
      }

  Dashboard:
    formal_spec: |
      Dashboard = {
        panels: Seq<Panel>
        variables: Set<Variable>
        links: Set<Link>
      }
```

## 3. 形式化规范

```text
// SLI/SLO 覆盖
Invariant MON1 (SLOCoverage):
  ∀ svc. defined(SLI(svc), SLO(svc)) ⇒ exists(Alert for SLO violation)

// 标签基数上限
Invariant MON2 (LabelCardinalityBound):
  ∀ m ∈ Metrics. |cardinality(m.labels)| ≤ bound(m)

// Runbook 存在
Invariant MON3 (RunbookPresence):
  ∀ a ∈ Alerts. exists(a.runbook)

// 指标命名规范
Invariant MON4 (MetricNaming):
  ∀ m. name(m) matches ^[a-z_][a-z0-9_]*(_seconds|_bytes|_total)?$
```

## 4. 与 L2/L4 映射

- L2_D06_监控元模型 / L2_D04_运行时元模型 / L2_D10_分布式模式
- 云原生对标：Prometheus/Alertmanager/Grafana、OpenTelemetry/Tempo/Jaeger
