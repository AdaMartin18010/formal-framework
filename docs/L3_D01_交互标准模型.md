---
id: L3_D01_STD_V0.1
title: 交互标准模型（L3）
level: L3
domain: D01
version: V0.1
status: draft
---

## 1. 范围

- API/协议/消息/契约的标准字段、约束、不变式

## 2. 核心结构（占位）

- Endpoint{ id, path, method, requestSchema, responseSchema, errors }
- Contract{ auth, rateLimit, versioning, deprecation }

## 3. 关键不变式（占位）

```text
Invariant I1 (VersionCompatibility):
  ∀ endpoint, v_old, v_new.
    compatible(v_old, v_new) ⇒
      (required_fields(v_new) ⊆ required_fields(v_old)) ∧
      (response_schema(v_new) ⊇ response_schema(v_old))

Invariant I2 (AuthEnforcement):
  ∀ call.
    requires_auth(call.endpoint) ⇒ has_valid_token(call)

Invariant I3 (ContractCompleteness):
  ∀ endpoint.
    defined(requestSchema) ∧ defined(responseSchema) ∧ defined(errors)
```

## 4. 验证样例（占位）

- I1 → 类型论与契约测试：生成 v_old/v_new 的差异契约用例；校验 required/response 关系；参考 `VERIFICATION_MATRIX.md`
- I2 → 逻辑验证与安全测试：对需要鉴权的 Endpoint 自动注入未授权用例，应返回 401/403；参考 `TESTING_VERIFICATION_SORTING.md`
- I3 → 结构完整性：对每个 Endpoint 生成 schema 校验与错误码覆盖；参考 `FORMAL_VERIFICATION_SORTING.md`

## 5. 与 L2/L4 映射（占位）

- L2_D01_交互元模型；行业 API 对标（Open Banking 等）
